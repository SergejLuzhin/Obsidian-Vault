
- [[#Что такое класс?|Что такое класс?]]
- [[#Наследование|Наследование]]
- [[#Полиморфизм|Полиморфизм]]
	- [[#Полиморфизм#Виды полиморфизма|Виды полиморфизма]]
- [[#Разница структуры и класса|Разница структуры и класса]]
- [[#Механизм copy-on-write (CoW)|Механизм copy-on-write (CoW)]]
- [[#Принципы ООП|Принципы ООП]]

---
##  Что такое класс?

**Класс** — это «чертёж» для объектов: он объединяет **данные** (свойства) и **поведение** (методы). В отличие от структуры - это **ссылочный тип** с поддержкой наследования, деинициализатора и идентичности объектов (сравнение  `===`).

Синтаксис создания класса не отличается от [[06. Структуры|структуры]], кроме ключевого слова - `class` вместо `struct`. А также у класса должны быть **явно прописаны инициализаторы**, либо заданы **дефолтные значения** полям, кроме опциональных.

```swift
class Transport {
    var color: UIColor
    
    init(color: UIColor) {
        self.color = color
    }

    func move() {
        print("Поехали!")
    }
}

let transport = Transport(color: .yellow)
```

## Наследование

**Наследование** — это механизм объектно-ориентированного
программирования, который позволяет создавать **новый** класс на основе уже
**существующего** класса (родительского). При этом новый класс наследует свойства
и методы родительского, а также может иметь собственные свойства и методы.

Наследование реализуется следующим образом:

```swift
class Car: Transport { }
```
Здесь мы объявили класс `Car` и унаследовали его от класса `Transport`.

*Родительский класс может быть только **один**, а дочерних сколько угодно.*

Для обращения к методам и полям родительского класса нужно использовать ключевое слово `super`.

```swift
    init(breed: String, name: String) {
        self.breed = breed
        super.init(name: name)
    }
```

## Полиморфизм

**Полиморфизм** — это один из основных принципов объектно-ориентированного программирования (ООП), который означает возможность работы с **различными** объектами **единым образом**. Это позволяет использовать одну и ту же функцию или метод для разных типов данных, при этом каждый объект выполняет действие в соответствии со своим типом.

Перегрузка метода родительского класса:

```swift
class Rocket: Transport {
    ...
    override func move() {
        print("Полетели!")
    }
}
```
### Виды полиморфизма

В языке Swift есть **две разновидности** полиморфизма:

- **Полиморфизм подтипов** — когда конкретный тип данных, который передаётся в функцию, неизвестен;
- **Параметрический полиморфизм** — когда уже во время компиляции известны и тип параметра, и его методы.

Пример параметрического полиморфизма, в качестве параметра функции мы используем родительский класс, чтобы мы могли применять данный метод для всех дочерних классов:

```swift
func reColor(transport: Transport, newColor: UIColor) {
    transport.color = newColor
}

reColor(transport: car, newColor: .green)
reColor(transport: rocket, newColor: .yellow)
```

*ДОПОЛНИТЬ ПРИМЕРОМ ПОЛИМОРФИЗМА ПОДТИПОВ И РАЗОБРАТЬСЯ В ЧЕМ ИХ РАЗНИЦА*

## Разница структуры и класса

Классы поддерживают **наследование** и другие инструменты ООП.

А также, структуры являются так называемыми **значимыми типами** (value type) и хранятся в **стеке** (stack). А классы — это **ссылочный тип** (reference type), и хранятся они в **куче** (heap).

Поэтому, если переменная `rocket` хранит ссылку на объект класса, то `let rocketCopy = rocket` присвоит ту же самую ссылку переменной `rocketCopy`, а следовательно все изменения объекта, на который ссылается одна переменная, буду также влиять и на вторую.

## Механизм copy-on-write (CoW)

Механизм **copy-on-write** - особенность языка Swift, которая помогает оптимизировать затрачиваемую память для стандартных коллекций, таких как `Array`, `Dictionary`, `Set` и `String`, а также для собственных коллекций, которые реализуют его поддержку.

 CoW производит **фактическое копирование** только в момент **изменения значения** для value-типов, а до этого момента скопированные значимые типы ссылаются на одну область в памяти.

## Принципы ООП

В ООП есть **три** основных принципа:

- Наследование
- Инкапсуляция
- Полиморфизм

**Наследование** - создание нового класса на основе уже существующего, при этом сохраняются все методы и свойства родительского класса.

**Полиморфизм** - возможность работать с объектами разных классов, которые имеют общего предка, как с объектами базового класса, при этом фактическое поведение определяется реальным классом объекта.

**Инкапсуляция** - скрытие от пользователя внутренних методов и свойств с помощью модификаторов доступа.