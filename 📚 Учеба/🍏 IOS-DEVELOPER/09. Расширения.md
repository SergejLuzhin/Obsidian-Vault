- [[#Что такое расширения|Что такое расширения]]
- [[#Специализированные расширения|Специализированные расширения]]
---
## Что такое расширения

**Расширения** позволяют добавлять **новую** функциональность к **существующему** типу класса, структуры или перечисления, при этом **не меняя код** типа.

> Расширения добавляют функциональность к уже существующим структурам или классам. Они нужны, например, когда у вас нет непосредственного доступа к коду (как в случае с расширением для стандартного типа `String`), когда вы не знаете, как выглядит исходный код, и тем более не можете его изменить.

Расширение класса Employee новой функцией payment:
```swift
extension Employee {
    func payment() -> Int? {
        guard let hours = hours else {
            return nil
        }
        
        return rate * hours
    }
}
```

Расширение класса Employee новым вычисляемым свойством:
```swift
extension Employee {
    var detailedDescription: String {
        return name + " " + role + " " + "\(rate)"
    }
}
```

*Дополнять классы новыми **хранимыми** свойствами **нельзя**, только вычисляемыми!*

Расширение стандартного типа Int:
```swift
extension Int {
    var roundedToTen: Int {
        // Знак % означает остаток от деления на заданное после него число
        let remainder = self % 10
        if remainder == 0 {
            return self // Если остаток равен 0, число уже кратно десяти
        } else {
            return self + (10 - remainder) // Иначе добавляем разницу до следующего десятка
        }
    }
}
```

## Специализированные расширения

**Cпециализированное** (или “constrained”) расширение — это extension c **ограничениями по типам**, которое применяется **только** когда generic-параметры удовлетворяют условию (where …) или подставлен конкретный тип. Так “специализируем” поведение под частные случаи.

Расширение опционалов только для типа String:
```swift 
extension Optional where Wrapped == String { //Wrapped - generic-тип
    var isNilOrEmpty: Bool {
        switch self {
        case .some(let string):
            return string.isEmpty
        case .none:
            return true
        }
    }
}
```

Расширение массивов, только чьи элементы являются типом Int:
```swift
extension Array where Element == Int {
    var sum: Int { reduce(0, +) }
}

[1,2,3].sum          // 6
["a","b"]/*.sum*/    // недоступно
```
